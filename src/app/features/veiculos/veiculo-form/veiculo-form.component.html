<div class="container mt-4">
  <h2>{{ veiculo?.id ? 'Editar Veículo' : 'Cadastrar Veículo' }}</h2>
  <form #form="ngForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="mb-3">
      <label for="placa" class="form-label">Placa</label>
      <input
        type="text"
        id="placa"
        name="placa"
        class="form-control"
        [(ngModel)]="veiculo.placa"
        required
        maxlength="8"
        #placaInput="ngModel"
      />
      <div *ngIf="placaInput.invalid && (placaInput.dirty || placaInput.touched)" class="text-danger">
        <small *ngIf="placaInput.errors?.['required']">Placa é obrigatória.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="modelo" class="form-label">Modelo</label>
      <input
        type="text"
        id="modelo"
        name="modelo"
        class="form-control"
        [(ngModel)]="veiculo.modelo"
        required
        #modeloInput="ngModel"
      />
      <div *ngIf="modeloInput.invalid && (modeloInput.dirty || modeloInput.touched)" class="text-danger">
        <small *ngIf="modeloInput.errors?.['required']">Modelo é obrigatório.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="tipo" class="form-label">Tipo</label>
      <select
        id="tipo"
        name="tipo"
        class="form-select"
        [(ngModel)]="veiculo.tipo"
        required
        #tipoInput="ngModel"
      >
        <option value="" disabled selected>Selecione o tipo</option>
        <option value="CARRO">Carro</option>
        <option value="VAN">Van</option>
        <option value="CAMINHAO">Caminhão</option>
        <option value="CAMINHONETE">Caminhonete</option>
        <option value="MOTO">Moto</option>
      </select>
      <div *ngIf="tipoInput.invalid && (tipoInput.dirty || tipoInput.touched)" class="text-danger">
        <small *ngIf="tipoInput.errors?.['required']">Tipo é obrigatório.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="ano" class="form-label">Ano</label>
      <input
        type="number"
        id="ano"
        name="ano"
        class="form-control"
        [(ngModel)]="veiculo.ano"
        required
        min="1900"
        max="2100"
        #anoInput="ngModel"
      />
      <div *ngIf="anoInput.invalid && (anoInput.dirty || anoInput.touched)" class="text-danger">
        <small *ngIf="anoInput.errors?.['required']">Ano é obrigatório.</small>
        <small *ngIf="anoInput.errors?.['min'] || anoInput.errors?.['max']">Ano inválido.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="quilometragemAtual" class="form-label">Quilometragem Atual</label>
      <input
        type="number"
        id="quilometragemAtual"
        name="quilometragemAtual"
        class="form-control"
        [(ngModel)]="veiculo.quilometragemAtual"
        required
        min="0"
        #kmInput="ngModel"
      />
      <div *ngIf="kmInput.invalid && (kmInput.dirty || kmInput.touched)" class="text-danger">
        <small *ngIf="kmInput.errors?.['required']">Quilometragem é obrigatória.</small>
        <small *ngIf="kmInput.errors?.['min']">Quilometragem não pode ser negativa.</small>
      </div>
    </div>

    <div class="mb-3">
      <label for="status" class="form-label">Status</label>
      <select
        id="status"
        name="status"
        class="form-select"
        [(ngModel)]="veiculo.status"
        required
        #statusInput="ngModel"
      >
        <option value="" disabled selected>Selecione o status</option>
        <option value="DISPONIVEL">Disponível</option>
        <option value="INATIVO">Inativo</option>
        <option value="EM_MANUTENCAO">Manutenção</option>
      </select>
      <div *ngIf="statusInput.invalid && (statusInput.dirty || statusInput.touched)" class="text-danger">
        <small *ngIf="statusInput.errors?.['required']">Status é obrigatório.</small>
      </div>
    </div>

    <button type="submit" class="btn btn-success" [disabled]="form.invalid">
      Salvar
    </button>
    <a class="btn btn-secondary ms-2" [routerLink]="['/app/veiculos']">Cancelar</a>
  </form>
</div>
